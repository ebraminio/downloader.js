<canvas height="15" width="300"></canvas>
<style>
  canvas {
    border: 1px solid grey;
    padding: 1px;
    border-radius: 2px;
  }
</style>
<script>
  var canvas = document.getElementsByTagName('canvas')[0];
  var width = canvas.width;
  var chunks = 4;
  var ctx = canvas.getContext('2d');

  new Promise(resolve => {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', '/a.bin');
    xhr.onreadystatechange = () => {
      resolve(+xhr.getResponseHeader("Content-Length"));
      xhr.abort();
    };
    xhr.send();
  }).then(size => {
    Promise.all(new Array(chunks).fill().map((_, i) => {
      return new Promise(resolve => {
        var xhr = new XMLHttpRequest();

        xhr.onreadystatechange = () => {
          if (xhr.readyState !== 4) {
            return;
          }
          window.URL = window.URL || window.webkitURL;

          resolve(xhr.response);
        };

        xhr.onprogress = function(evt) {
          if (evt.lengthComputable) {
            var x = (evt.loaded / evt.total) * (width / chunks);
            ctx.fillStyle = '#5cb85c';
            ctx.fillRect(((width / chunks) * i), 0, x, 15);
          }
        };

        xhr.open('GET', 'a.bin', true);
        xhr.responseType = 'blob';
        var chunk_size = Math.floor(size / chunks);
        var start = i * chunk_size;
        var end = i === 3 ? size : ((i + 1) * chunk_size - 1);
        xhr.setRequestHeader('Range', `bytes=${start}-${end}`); // the bytes (incl.) you request
        xhr.send(null);
      });
    })).then(function(result) {
      var anchor = document.createElement('a');
      anchor.href = URL.createObjectURL(new Blob(result));
      anchor.download = 'b.bin';
      anchor.textContent = 'Your download is completed, click here!';
      document.body.appendChild(anchor);
    });

  });
</script>
